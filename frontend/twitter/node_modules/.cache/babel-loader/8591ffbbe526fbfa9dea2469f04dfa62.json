{"ast":null,"code":"var _jsxFileName = \"/Users/zoegong/NEU/CS5610 Web Dev/5610-project3/frontend-1/twitter/src/MainPage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './output.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faEnvelope, faHeart } from '@fortawesome/free-solid-svg-icons';\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\nimport { faGrinHearts, faComment } from '@fortawesome/free-regular-svg-icons';\nimport CreatePostForm from './CreatePost';\nconst MainPage = ({\n  user = {},\n  onLogout\n}) => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newComment, setNewComment] = useState('');\n  const [editingComment, setEditingComment] = useState({\n    id: null,\n    text: ''\n  });\n  useEffect(() => {\n    fetchPosts();\n  }, [user === null || user === void 0 ? void 0 : user._id]);\n  const fetchPosts = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/v1/posts/all', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch posts');\n      }\n      const allPosts = await response.json();\n      if (user === null || user === void 0 ? void 0 : user._id) {\n        // we want to check if the user is logged in, if it is, then filter posts that are join the following list id\n        const filterPosts = allPosts.filter(post => {\n          return post.user._id === user._id || user.following.includes(post.user._id); //include either self or following's post\n        });\n        setPosts(filterPosts);\n      } else {\n        setPosts(allPosts);\n      }\n    } catch (error) {\n      setError('Failed to load posts. Please try again later.');\n      console.error('Error fetching posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  // helper function to parse the timestamp in mongodb to new date format\n  const formatDate = createAt => {\n    if (!createAt) return '';\n    return new Date(createAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const handleLikeUnlike = async postId => {\n    if (!(user === null || user === void 0 ? void 0 : user._id)) {\n      setError(\"Please log in to like or unlike the post\"); //can only like or unlike the post when the user is logged in\n      return;\n    }\n    try {\n      const response = await fetch(`http://localhost:3001/api/v1/posts/like/${postId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) throw new Error('Failed to like/unlike post');\n      const updatedLikes = await response.json();\n      setPosts(posts.map(post => {\n        if (post._id == postId) {\n          return {\n            ...post,\n            likes: updatedLikes.likes\n          };\n        }\n        return post;\n      }));\n    } catch (error) {\n      console.error('Error liking/unliking post:', error);\n      setError('Failed to like/unlike post');\n    }\n  };\n  const handleComment = async postId => {\n    if (!(user === null || user === void 0 ? void 0 : user._id)) {\n      setError('Please log in to comment');\n      return;\n    }\n    if (!newComment.trim()) {\n      setError('Comment cannot be empty');\n      return;\n    }\n    try {\n      const response = await fetch(`http://localhost:3001/api/v1/posts/comment/${postId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          text: newComment\n        })\n      });\n      if (!response.ok) throw new Error('Failed to add comment');\n      setNewComment('');\n      fetchPosts();\n    } catch (error) {\n      console.error('Error adding comment:', error);\n      setError('Failed to add comment');\n    }\n  };\n  const isLikedByUser = post => {\n    return post.likes.includes(user === null || user === void 0 ? void 0 : user._id);\n  };\n  const handleEditComment = async (postId, commentId) => {\n    if (!editingComment.text.trim()) {\n      setError('Comment cannot be empty');\n      return;\n    }\n    try {\n      const response = await fetch(`http://localhost:3001/api/v1/posts/comment/${postId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          text: editingComment.text\n        })\n      });\n      if (!response.ok) throw new Error('Failed to edit comment');\n      setEditingComment({\n        id: null,\n        text: ''\n      });\n      fetchPosts();\n    } catch (error) {\n      console.error('Error editing comment:', error);\n      setError('Failed to edit comment');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between h-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl font-bold text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTwitter,\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }), \" \", /*#__PURE__*/React.createElement(React.Fragment, null, \" \"), (user === null || user === void 0 ? void 0 : user._id) ? 'Your Feed' : 'Recent Posts From All Users')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.profileImg,\n    className: \"w-8 h-8 rounded-full mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 24\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-xl font-bold text-gray-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, \"Welcome, \", user.username, \"!\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onLogout,\n    className: \"px-4 py-2 rounded-full bg-gray-800 text-white hover:bg-gray-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, \"Logout\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, \" \"), \"Please log in to like or comment \"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) &&\n  /*#__PURE__*/\n  //   <div className=\"mb-6\">\n  //     <button\n  //       onClick={() => window.location.href = '/create-post'}  \n  //       className=\"w-full bg-white shadow rounded-lg p-4 text-left hover:shadow-md transition-shadow flex items-center space-x-3\"\n  //     >\n  //       <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center\">\n  //         <FontAwesomeIcon icon={faEnvelope} color=\"#0ea5e9\"/>\n  //       </div>\n  //       <span className=\"text-gray-500\">Share your thoughts or updates</span>\n  //     </button>\n  //   </div>\n  React.createElement(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CreatePostForm, {\n    onPostCreated: fetchPosts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 5\n    }\n  })), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center py-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, \"Loading posts...\")) : error ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-50 border border-red-200 rounded-md p-4 text-red-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, error) : posts.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center py-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) ? \"No posts from people you follow yet\" : \"No posts available\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-y-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, posts.map(post => /*#__PURE__*/React.createElement(\"div\", {\n    key: post._id,\n    className: \"bg-white rounded-lg shadow overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 border-b\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\",\n    alt: post.user.username,\n    className: \"h-10 w-10 rounded-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm font-medium text-gray-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 72\n    }\n  }), \" \", /*#__PURE__*/React.createElement(React.Fragment, null), post.user.fullName), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 23\n    }\n  }, \"@\", post.user.username), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 23\n    }\n  }, formatDate(post.createdAt))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-gray-800 whitespace-pre-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  }, post.text), post.img && /*#__PURE__*/React.createElement(\"img\", {\n    src: post.img,\n    alt: \"Post attachment\",\n    className: \"mt-3 rounded-lg max-h-96 w-full object-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-4 py-3 border-t bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-center space-x-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleLikeUnlike(post._id),\n    disabled: !(user === null || user === void 0 ? void 0 : user._id),\n    className: `flex items-center space-x-2 ${isLikedByUser(post) ? 'text-blue-500' : 'text-gray-500 hover:text-blue-500'} ${!(user === null || user === void 0 ? void 0 : user._id) && 'cursor-not-allowed opacity-50'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    color: \"darkred\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 23\n    }\n  }, post.likes.length)), (user === null || user === void 0 ? void 0 : user._id) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: newComment,\n    onChange: e => setNewComment(e.target.value),\n    placeholder: \"Add a comment...\",\n    className: \"w-full px-3 py-1 text-sm border rounded-full focus:outline-none focus:ring-1 focus:ring-blue-500\",\n    onKeyPress: e => {\n      if (e.key === 'Enter') {\n        handleComment(post._id);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2 text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 23\n    }\n  }, post.comments.length)))), post.comments && post.comments.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-4 pt-2 pb-4 bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 19\n    }\n  }, post.comments.map(comment => /*#__PURE__*/React.createElement(\"div\", {\n    key: comment._id,\n    className: \"mt-2 p-2 bg-white rounded-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUser,\n    className: \"text-gray-400 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-medium text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 29\n    }\n  }, comment.user.username, \": \"), editingComment.id === comment._id ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: editingComment.text,\n    onChange: e => setEditingComment({\n      ...editingComment,\n      text: e.target.value\n    }),\n    className: \"ml-2 border rounded px-2 py-1 text-sm\",\n    onKeyDown: e => {\n      if (e.key === 'Enter') {\n        handleEditComment(post._id, comment._id);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleEditComment(post._id, comment._id),\n    className: \"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 32\n    }\n  }, \"Save\")) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 31\n    }\n  }, comment.text)), (user === null || user === void 0 ? void 0 : user._id) === comment.user._id && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 29\n    }\n  }, editingComment.id === comment._id ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleEditComment(post._id, comment._id),\n    className: \"text-xs text-blue-500 hover:text-blue-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 33\n    }\n  }, \"Save\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setEditingComment({\n      id: comment._id,\n      text: comment.text\n    }),\n    className: \"text-xs text-gray-500 hover:text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 33\n    }\n  }, \"Edit\")))))))))));\n};\nexport default MainPage;","map":{"version":3,"names":["React","useState","useEffect","FontAwesomeIcon","faUser","faEnvelope","faHeart","faTwitter","faGrinHearts","faComment","CreatePostForm","MainPage","user","onLogout","posts","setPosts","loading","setLoading","error","setError","newComment","setNewComment","editingComment","setEditingComment","id","text","fetchPosts","_id","response","fetch","method","headers","credentials","ok","Error","allPosts","json","filterPosts","filter","post","following","includes","console","formatDate","createAt","Date","toLocaleDateString","year","month","day","hour","minute","handleLikeUnlike","postId","updatedLikes","map","likes","handleComment","trim","body","JSON","stringify","isLikedByUser","handleEditComment","commentId","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","icon","color","Fragment","src","profileImg","username","onClick","onPostCreated","length","key","alt","fullName","createdAt","img","disabled","type","value","onChange","e","target","placeholder","onKeyPress","comments","comment","onKeyDown"],"sources":["/Users/zoegong/NEU/CS5610 Web Dev/5610-project3/frontend-1/twitter/src/MainPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport './output.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n    faUser, \n    faEnvelope, \n \n\n    faHeart, \n} from '@fortawesome/free-solid-svg-icons';\nimport { faTwitter} from '@fortawesome/free-brands-svg-icons';\nimport {faGrinHearts, faComment} from '@fortawesome/free-regular-svg-icons';\nimport CreatePostForm from './CreatePost';\n\nconst MainPage = ({ user = {}, onLogout }) => { \n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newComment, setNewComment] = useState('');\n  const [editingComment, setEditingComment] = useState({id: null, text: ''});\n\n \n\n  useEffect(() => {\n    fetchPosts();\n  }, [user?._id]); \n\n  const fetchPosts = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/v1/posts/all', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch posts');\n      }\n\n      const allPosts = await response.json();\n\n      if (user?._id){ // we want to check if the user is logged in, if it is, then filter posts that are join the following list id\n        const filterPosts = allPosts.filter(post=>{\n            return post.user._id ===user._id || user.following.includes(post.user._id); //include either self or following's post\n        });\n        setPosts(filterPosts);\n      }else{\n        setPosts(allPosts);\n      }\n      \n    } catch (error) {\n      setError('Failed to load posts. Please try again later.');\n      console.error('Error fetching posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n// helper function to parse the timestamp in mongodb to new date format\n  const formatDate = (createAt) => {\n    if (!createAt) return '';\n    return new Date(createAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const handleLikeUnlike = async(postId) =>{\n    if (!user?._id){\n        setError(\"Please log in to like or unlike the post\"); //can only like or unlike the post when the user is logged in\n        return;\n    }\n\n    try{\n        const response = await fetch(`http://localhost:3001/api/v1/posts/like/${postId}`,{\n            method: 'PUT',\n            headers: {\n                 'Content-Type': 'application/json'\n            },\n            credentials: 'include'\n        });\n        if (!response.ok) throw new Error('Failed to like/unlike post');\n        const updatedLikes = await response.json();\n\n        setPosts(posts.map(post =>{\n            if (post._id==postId){\n                return {...post, likes: updatedLikes.likes};\n            }\n            return post;\n        }));\n\n        \n    }catch(error){\n        console.error('Error liking/unliking post:', error);\n        setError('Failed to like/unlike post');\n    }\n  };\n\n  const handleComment = async (postId) => {\n    if (!user?._id) {\n      setError('Please log in to comment');\n      return;\n    }\n\n    if (!newComment.trim()) {\n        setError('Comment cannot be empty');\n        return;\n      }\n      try{\n        const response = await fetch(`http://localhost:3001/api/v1/posts/comment/${postId}`, {\n            method: 'PATCH',\n            headers:{\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include',\n            body: JSON.stringify({ text: newComment })\n        });\n        if (!response.ok) throw new Error('Failed to add comment');\n\n      setNewComment('');\n      fetchPosts();\n      }catch(error){\n        console.error('Error adding comment:', error);\n        setError('Failed to add comment');\n      }\n  }\n\n  const isLikedByUser = (post) => {\n    return post.likes.includes(user?._id);\n  };\n\n  const handleEditComment = async (postId, commentId) =>{\n    if (!editingComment.text.trim()) {\n        setError('Comment cannot be empty');\n        return;\n    }\n\n    try{\n        const response = await fetch(`http://localhost:3001/api/v1/posts/comment/${postId}`,{\n            method: 'PATCH',\n            headers:{\n                'Content-Type': 'application/json'  \n            },\n            credentials :'include',\n            body: JSON.stringify({ text: editingComment.text })\n        });\n        if (!response.ok) throw new Error('Failed to edit comment');\n\n    setEditingComment({ id: null, text: '' });\n    fetchPosts();\n    }catch (error) {\n        console.error('Error editing comment:', error);\n        setError('Failed to edit comment');\n      }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n   \n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-800\">\n              <FontAwesomeIcon icon={faTwitter} color =\"#0ea5e9\"/> <> </>\n                {user?._id ? 'Your Feed' : 'Recent Posts From All Users'}\n              </h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              {user?._id ? (\n                <><div><img src={user.profileImg}  className=\"w-8 h-8 rounded-full mr-2\"/>\n                  <span className=\"text-xl font-bold text-gray-700\" >Welcome, {user.username}!</span>\n                  <button\n                    onClick={onLogout}\n                    className=\"px-4 py-2 rounded-full bg-gray-800 text-white hover:bg-gray-700\"\n                  >\n                    Logout\n                  </button></div>\n                </>\n              ) : (\n                \n                <div className=\"text-gray-600\"><> </>\n                      Please log in to like or comment </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n   \n      <div className=\"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n      \n        {/* Add Create Post Button here, only shown when user is logged in */}\n        {user?._id && (\n        //   <div className=\"mb-6\">\n        //     <button\n        //       onClick={() => window.location.href = '/create-post'}  \n        //       className=\"w-full bg-white shadow rounded-lg p-4 text-left hover:shadow-md transition-shadow flex items-center space-x-3\"\n        //     >\n        //       <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center\">\n        //         <FontAwesomeIcon icon={faEnvelope} color=\"#0ea5e9\"/>\n        //       </div>\n        //       <span className=\"text-gray-500\">Share your thoughts or updates</span>\n        //     </button>\n        //   </div>\n        <div className=\"mb-6\">\n    <CreatePostForm onPostCreated={fetchPosts} />\n  </div>\n        )}\n\n        {loading ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-600\">Loading posts...</div>\n          </div>\n        ) : error ? (\n          <div className=\"bg-red-50 border border-red-200 rounded-md p-4 text-red-700\">\n            {error}\n          </div>\n        ) : posts.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-600\">\n              {user?._id ? \"No posts from people you follow yet\" : \"No posts available\"}\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {posts.map((post) => (\n              <div key={post._id} className=\"bg-white rounded-lg shadow overflow-hidden\">\n                {/* Post Header */}\n                <div className=\"p-4 border-b\">\n                  <div className=\"flex items-center\">\n                    <img\n                      src={post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\"}\n                      alt={post.user.username}\n                      className=\"h-10 w-10 rounded-full\"\n                    />\n                    <div className=\"ml-3\">\n                      <p className=\"text-sm font-medium text-gray-900\"><FontAwesomeIcon icon={faUser}/> <></>\n                        {post.user.fullName} \n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        @{post.user.username}\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        {formatDate(post.createdAt)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Post Content */}\n                <div className=\"p-4\">\n                  <p className=\"text-gray-800 whitespace-pre-wrap\">{post.text}</p>\n                  {post.img && (\n                    <img\n                      src={post.img}\n                      alt=\"Post attachment\"\n                      className=\"mt-3 rounded-lg max-h-96 w-full object-cover\"\n                    />\n                  )}\n                </div>\n\n                {/* Post Actions */}\n                <div className=\"px-4 py-3 border-t bg-gray-50\">\n                  <div className=\"flex items-center justify-center space-x-10\">\n                    <button \n                      onClick={() => handleLikeUnlike(post._id)}\n                      disabled={!user?._id}\n                      className={`flex items-center space-x-2 ${\n                        isLikedByUser(post) \n                          ? 'text-blue-500' \n                          : 'text-gray-500 hover:text-blue-500'\n                      } ${!user?._id && 'cursor-not-allowed opacity-50'}`}\n                    >\n                      <FontAwesomeIcon icon={faHeart}  color ='darkred' />\n                      <span color =\"#0ea5e9\">{post.likes.length}</span>\n                    </button>\n\n                    {user?._id && (\n                      <div className=\"flex-1 mx-4\">\n                        <input\n                          type=\"text\"\n                          value={newComment}\n                          onChange={(e) => setNewComment(e.target.value)}\n                          placeholder=\"Add a comment...\"\n                          className=\"w-full px-3 py-1 text-sm border rounded-full focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          onKeyPress={(e) => {\n                            if (e.key === 'Enter') {\n                              handleComment(post._id);\n                            }\n                          }}\n                        />\n                      </div>\n                    )}\n                \n\n                    <div className=\"flex items-center space-x-2 text-gray-500\">\n                      <FontAwesomeIcon icon={faComment} />\n                      <span>{post.comments.length}</span>\n                    </div>\n                  </div>\n                </div>\n\n        {post.comments && post.comments.length > 0 && (\n                  <div className=\"px-4 pt-2 pb-4 bg-gray-50\">\n                    {post.comments.map((comment) => (\n                      <div key={comment._id} className=\"mt-2 p-2 bg-white rounded-lg\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center\">\n                            <FontAwesomeIcon icon={faUser} className=\"text-gray-400 mr-2\" />\n                            <span className=\"font-medium text-sm\">{comment.user.username}: </span>\n                            {editingComment.id === comment._id ? (\n                                <div className=\"flex items-center space-x-2\">\n                              <input\n                                type=\"text\"\n                                value={editingComment.text}\n                                onChange={(e) => setEditingComment({ ...editingComment, text: e.target.value })}\n                                className=\"ml-2 border rounded px-2 py-1 text-sm\"\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter') {\n                                    handleEditComment(post._id, comment._id);\n                                  }\n                                }}\n                              />\n                               <button\n                  onClick={() => handleEditComment(post._id, comment._id)}\n                  className=\"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600\"\n                >\n                  Save\n                </button>\n              </div>\n                            ) : (\n                              <span className=\"ml-2 text-sm\">{comment.text}</span>\n                            )}\n                          </div>\n                          {user?._id === comment.user._id && (\n                            <div>\n                              {editingComment.id === comment._id ? (\n                                <button\n                                  onClick={() => handleEditComment(post._id, comment._id)}\n                                  className=\"text-xs text-blue-500 hover:text-blue-600\"\n                                >\n                                  Save\n                                </button>\n                              ) : (\n                                <button\n                                  onClick={() => setEditingComment({ id: comment._id, text: comment.text })}\n                                  className=\"text-xs text-gray-500 hover:text-gray-600\"\n                                >\n                                  Edit\n                                </button>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n    \n\n              </div>\n            ))}\n            \n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MainPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}