{"ast":null,"code":"var _jsxFileName = \"/Users/zoegong/NEU/CS5610 Web Dev/twitter/frontend/twitter/src/MainPage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './output.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faEnvelope, faBell, faTimes, faTrash, faPaperPlane, faHeart, faImage, faUserPlus } from '@fortawesome/free-solid-svg-icons';\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\nimport { faGrinHearts, faComment } from '@fortawesome/free-regular-svg-icons';\nconst API_URL = 'https://project3-44gu.onrender.com/';\nconst MainPage = ({\n  user = {},\n  onLogout,\n  setUser,\n  onUsernameClick\n}) => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newComment, setNewComment] = useState('');\n  const [editingComment, setEditingComment] = useState({\n    id: null,\n    text: ''\n  });\n  const [suggestedPosts, setSuggestedPosts] = useState([]);\n  const [text, setText] = useState('');\n  const [image, setImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [loadingPost, setLoadingPost] = useState(false);\n  const [followedUsers, setFollowedUsers] = useState(new Set());\n  useEffect(() => {\n    fetchPosts();\n  }, [user === null || user === void 0 ? void 0 : user._id]);\n\n  // fetch all post for the main page:\n\n  const fetchPosts = async () => {\n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/all`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch posts');\n      }\n      const allPosts = await response.json();\n      if (user === null || user === void 0 ? void 0 : user._id) {\n        // we want to check if the user is logged in, if it is, then filter posts that are join the following list id\n        const filterPosts = allPosts.filter(post => {\n          return post.user._id === user._id || user.following.includes(post.user._id); //include either self or following's post\n        });\n        setPosts(filterPosts);\n        const suggestedPosts = allPosts.filter(post => post.user._id !== user._id && !user.following.includes(post.user._id));\n        setSuggestedPosts(suggestedPosts);\n      } else {\n        setPosts(allPosts);\n      }\n    } catch (error) {\n      setError('Failed to load posts. Please try again later.');\n      console.error('Error fetching posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  // helper function to parse the timestamp in mongodb to new date format\n  const formatDate = createAt => {\n    if (!createAt) return '';\n    return new Date(createAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // handle function for like or unlike the post function\n\n  const handleLikeUnlike = async postId => {\n    if (!(user === null || user === void 0 ? void 0 : user._id)) {\n      setError(\"Please log in to like or unlike the post\"); //can only like or unlike the post when the user is logged in\n      return;\n    }\n    try {\n      console.log('Current JWT cookie:', document.cookie); // adding for debugging\n\n      const response = await fetch(`${API_URL}api/v1/posts/like/${postId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      console.log('Response status:', response.status);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.log('Error response:', errorText);\n        throw new Error(`Failed to like/unlike post: ${errorText}`);\n      }\n      if (!response.ok) throw new Error('Failed to like/unlike post');\n      const updatedLikes = await response.json();\n      setPosts(posts.map(post => {\n        if (post._id == postId) {\n          return {\n            ...post,\n            likes: updatedLikes.likes\n          };\n        }\n        return post;\n      }));\n    } catch (error) {\n      console.error('Error liking/unliking post:', error);\n      setError('Failed to like/unlike post');\n    }\n  };\n\n  // to edit the comment \n\n  const handleCommentChange = (postId, value) => {\n    setNewComment(prev => ({\n      ...prev,\n      [postId]: value\n    }));\n  };\n  const handleComment = async postId => {\n    if (!(user === null || user === void 0 ? void 0 : user._id)) {\n      setError('Please log in to comment');\n      return;\n    }\n    const commentText = newComment[postId];\n    if (!commentText.trim()) {\n      setError('Comment cannot be empty');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/comment/${postId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          text: commentText\n        })\n      });\n      if (!response.ok) throw new Error('Failed to add comment');\n      setNewComment(prev => ({\n        ...prev,\n        [postId]: ''\n      }));\n      fetchPosts();\n    } catch (error) {\n      console.error('Error adding comment:', error);\n      setError('Failed to add comment');\n    }\n  };\n  // to like or unlike the post\n  const isLikedByUser = post => {\n    return post.likes.includes(user === null || user === void 0 ? void 0 : user._id);\n  };\n  const handleEditComment = async (postId, commentId) => {\n    if (!editingComment.text.trim()) {\n      setError('Comment cannot be empty');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/comment/${postId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          text: editingComment.text\n        })\n      });\n      if (!response.ok) throw new Error('Failed to edit comment');\n      setEditingComment({\n        id: null,\n        text: ''\n      });\n      fetchPosts();\n    } catch (error) {\n      console.error('Error editing comment:', error);\n      setError('Failed to edit comment');\n    }\n  };\n  // add follow/unfollow \n  const handleFollow = async userId => {\n    if (!(user === null || user === void 0 ? void 0 : user._id)) {\n      setError('Please log in to follow users');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}api/v1/users/follow/${userId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) throw new Error('Failed to follow user');\n\n      // Update the followedUsers set\n      setFollowedUsers(prev => {\n        const newSet = new Set(prev);\n        if (prev.has(userId)) {\n          newSet.delete(userId);\n        } else {\n          newSet.add(userId);\n        }\n        return newSet;\n      });\n\n      // Refresh posts to update feed\n      fetchPosts();\n    } catch (error) {\n      console.error('Error following user:', error);\n      setError('Failed to follow user');\n    }\n  };\n\n  // delete post handler\n\n  const handleDeletePost = async postId => {\n    if (!window.confirm('Are you sure you want to delete this post?')) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) throw new Error('Failed to delete post');\n      setPosts(posts.filter(post => post._id !== postId));\n    } catch (error) {\n      console.error('Error deleting post:', error);\n      setError('Failed to delete post');\n    }\n  };\n  //-------------create post-------------------------------\n\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    const MAX_FILE_SIZE = 100 * 1024; //100kb\n    if (file) {\n      if (file.size > MAX_FILE_SIZE) {\n        setError('Image size must be less than 100kb');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageStr = reader.result.split(',')[1];\n        setImagePreview(reader.result);\n        setImage(imageStr);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!text) {\n      setError('Please add some text');\n      return;\n    }\n    setLoadingPost(true);\n    try {\n      const postData = {\n        text: text\n      };\n\n      // Only add img if it exists\n      if (image) {\n        postData.img = image;\n      }\n      console.log('Sending request with:', postData);\n      const response = await fetch(`${API_URL}api/v1/posts/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(postData)\n      });\n      if (!response.ok) throw new Error(\"Failed to create post\");\n      const newPost = await response.json();\n      setText('');\n      setImage(null);\n      setImagePreview(null);\n      fetchPosts();\n    } catch (error) {\n      setError('Failed to create post');\n      console.error('Error creating post:', error);\n    } finally {\n      setLoadingPost(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between h-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl font-bold text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTwitter,\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 15\n    }\n  }), \" \", /*#__PURE__*/React.createElement(React.Fragment, null, \" \"), (user === null || user === void 0 ? void 0 : user._id) ? 'Your Feed' : 'Recent Posts From All Users')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.profileImg || \"https://picsum.photos/seed/picsum/50/50\",\n    className: \"w-8 h-8 rounded-full mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 24\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onUsernameClick(user.username),\n    className: \"text-xl font-bold text-gray-700 hover:text-blue-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 19\n    }\n  }, \"Welcome, \", user.username, \"!\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, \" \"), \"Please log in to like or comment \"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) &&\n  /*#__PURE__*/\n  //   <div className=\"mb-6\">\n  //     <button\n  //       onClick={() => window.location.href = '/create-post'}  \n  //       className=\"w-full bg-white shadow rounded-lg p-4 text-left hover:shadow-md transition-shadow flex items-center space-x-3\"\n  //     >\n  //       <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center\">\n  //         <FontAwesomeIcon icon={faEnvelope} color=\"#0ea5e9\"/>\n  //       </div>\n  //       <span className=\"text-gray-500\">Share your thoughts or updates</span>\n  //     </button>\n  //   </div>\n  React.createElement(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full max-w-3xl mx-auto py-8 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white shadow mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between h-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl font-bold text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEnvelope,\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 19\n    }\n  }), \" \", /*#__PURE__*/React.createElement(React.Fragment, null, \" \"), \"Create Your Post!\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full max-w-2xl bg-white rounded-lg shadow p-6 justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: text,\n    onChange: e => setText(e.target.value),\n    placeholder: \"Feel free to share your thoughts here!\",\n    className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n    rows: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 11\n    }\n  }), imagePreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imagePreview,\n    alt: \"Preview\",\n    className: \"max-h-48 rounded-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      setImage(null);\n      setImagePreview(null);\n    },\n    className: \"absolute top-2 right-2 p-1 bg-gray-800 rounded-full text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 17\n    }\n  }))), error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-sm mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 13\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between items-center mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"cursor-pointer text-gray-600 hover:text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faImage,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleImageChange,\n    className: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 15\n    }\n  }), \"Add Image\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: loading || !text && !image,\n    className: \"px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 disabled:opacity-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 13\n    }\n  }, loading ? 'Posting...' : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPaperPlane,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 43\n    }\n  }), \"Post\"))))))), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center py-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 13\n    }\n  }, \"Loading posts...\")) : error ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-50 border border-red-200 rounded-md p-4 text-red-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 11\n    }\n  }, error) : posts.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center py-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 13\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) ? \"No posts from people you follow yet\" : \"No posts available\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-y-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 11\n    }\n  }, posts.map(post => /*#__PURE__*/React.createElement(\"div\", {\n    key: post._id,\n    className: \"bg-white rounded-lg shadow overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 border-b\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\",\n    alt: post.user.username,\n    className: \"h-10 w-10 rounded-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm font-medium text-gray-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 72\n    }\n  }), \" \", /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onUsernameClick(post.user.username),\n    className: \"hover:text-blue-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 23\n    }\n  }, post.user.fullName)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onUsernameClick(post.user.username),\n    className: \"hover:text-blue-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 23\n    }\n  }, \"@\", post.user.username)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 23\n    }\n  }, formatDate(post.createdAt))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-gray-800 whitespace-pre-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 19\n    }\n  }, post.text), post.img && /*#__PURE__*/React.createElement(\"img\", {\n    src: post.img,\n    alt: \"Post attachment\",\n    className: \"mt-3 rounded-lg max-h-96 w-full object-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-4 py-3 border-t bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-center space-x-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleLikeUnlike(post._id),\n    disabled: !(user === null || user === void 0 ? void 0 : user._id),\n    className: `flex items-center space-x-2 ${isLikedByUser(post) ? 'text-blue-500' : 'text-gray-500 hover:text-blue-500'} ${!(user === null || user === void 0 ? void 0 : user._id) && 'cursor-not-allowed opacity-50'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    color: \"darkred\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 23\n    }\n  }, post.likes.length)), (user === null || user === void 0 ? void 0 : user._id) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: newComment[post._id] || '',\n    onChange: e => handleCommentChange(post._id, e.target.value),\n    placeholder: \"Add a comment...\",\n    className: \"w-full px-3 py-1 text-sm border rounded-full focus:outline-none focus:ring-1 focus:ring-blue-500\",\n    onKeyDown: e => {\n      if (e.key === 'Enter') {\n        handleComment(post._id);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2 text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 23\n    }\n  }, post.comments.length)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2 text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 17\n    }\n  }, (user === null || user === void 0 ? void 0 : user._id) === post.user._id && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDeletePost(post._id),\n    className: \"text-darkred-500 hover:text-red-600 justify-items-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTrash,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 9\n    }\n  }), \" Delete the Post\")), post.comments && post.comments.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-4 pt-2 pb-4 bg-gray-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 19\n    }\n  }, post.comments.map(comment => /*#__PURE__*/React.createElement(\"div\", {\n    key: comment._id,\n    className: \"mt-2 p-2 bg-white rounded-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUser,\n    className: \"text-gray-400 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-medium text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 29\n    }\n  }, comment.user.username, \": \"), editingComment.id === comment._id ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 574,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: editingComment.text,\n    onChange: e => setEditingComment({\n      ...editingComment,\n      text: e.target.value\n    }),\n    className: \"ml-2 border rounded px-2 py-1 text-sm\",\n    onKeyDown: e => {\n      if (e.key === 'Enter') {\n        handleEditComment(post._id, comment._id);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleEditComment(post._id, comment._id),\n    className: \"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 32\n    }\n  }, \"Save\")) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 31\n    }\n  }, comment.text)), (user === null || user === void 0 ? void 0 : user._id) === comment.user._id && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 29\n    }\n  }, editingComment.id === comment._id ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleEditComment(post._id, comment._id),\n    className: \"text-xs text-blue-500 hover:text-blue-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 33\n    }\n  }, \"Save\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setEditingComment({\n      id: comment._id,\n      text: comment.text\n    }),\n    className: \"text-xs text-gray-500 hover:text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 33\n    }\n  }, \"Edit\")))))))))), (user === null || user === void 0 ? void 0 : user._id) && suggestedPosts.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-3xl mx-auto mt-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white rounded-lg shadow-md p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xl font-semibold text-gray-800 mb-4 flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUserPlus,\n    className: \"mr-2\",\n    color: \"#0ea5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 9\n    }\n  }), \"Posts You Might Like\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-y-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 7\n    }\n  }, suggestedPosts.slice(0, 10).map(post => /*#__PURE__*/React.createElement(\"div\", {\n    key: post._id,\n    className: \"bg-gray-50 rounded-lg p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\",\n    alt: post.user.username,\n    className: \"h-8 w-8 rounded-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm font-medium text-gray-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 19\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onUsernameClick(post.user.username),\n    className: \"hover:text-blue-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 69\n    }\n  }, post.user.fullName)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 19\n    }\n  }, \"  \", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onUsernameClick(post.user.username),\n    className: \"hover:text-blue-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 58\n    }\n  }, \"@\", post.user.username)))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleFollow(post.user._id),\n    className: `px-4 py-1 text-sm rounded-full ${followedUsers.has(post.user._id) ? 'bg-gray-200 text-gray-800 hover:bg-gray-300' : 'bg-blue-500 text-white hover:bg-blue-600'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 15\n    }\n  }, followedUsers.has(post.user._id) ? 'Unfollow' : 'Follow')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm text-gray-800 line-clamp-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 13\n    }\n  }, post.text), post.img && /*#__PURE__*/React.createElement(\"img\", {\n    src: post.img,\n    alt: \"Post attachment\",\n    className: \"mt-2 rounded-lg max-h-48 w-full object-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2 flex items-center space-x-4 text-sm text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 744,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 17\n    }\n  }), post.likes.length), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faComment,\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 750,\n      columnNumber: 17\n    }\n  }), post.comments.length))))))));\n};\nexport default MainPage;","map":{"version":3,"names":["React","useState","useEffect","FontAwesomeIcon","faUser","faEnvelope","faBell","faTimes","faTrash","faPaperPlane","faHeart","faImage","faUserPlus","faTwitter","faGrinHearts","faComment","API_URL","MainPage","user","onLogout","setUser","onUsernameClick","posts","setPosts","loading","setLoading","error","setError","newComment","setNewComment","editingComment","setEditingComment","id","text","suggestedPosts","setSuggestedPosts","setText","image","setImage","imagePreview","setImagePreview","loadingPost","setLoadingPost","followedUsers","setFollowedUsers","Set","fetchPosts","_id","response","fetch","method","headers","credentials","ok","Error","allPosts","json","filterPosts","filter","post","following","includes","console","formatDate","createAt","Date","toLocaleDateString","year","month","day","hour","minute","handleLikeUnlike","postId","log","document","cookie","status","errorText","updatedLikes","map","likes","handleCommentChange","value","prev","handleComment","commentText","trim","body","JSON","stringify","isLikedByUser","handleEditComment","commentId","handleFollow","userId","newSet","has","delete","add","handleDeletePost","window","confirm","handleImageChange","e","file","target","files","MAX_FILE_SIZE","size","reader","FileReader","onloadend","imageStr","result","split","readAsDataURL","handleSubmit","event","preventDefault","postData","img","newPost","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","icon","color","Fragment","src","profileImg","onClick","username","onSubmit","onChange","placeholder","rows","alt","type","accept","disabled","length","key","fullName","createdAt","onKeyDown","comments","comment","slice"],"sources":["/Users/zoegong/NEU/CS5610 Web Dev/twitter/frontend/twitter/src/MainPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport './output.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n    faUser, \n    faEnvelope, \n    faBell,\n    faTimes,\n    faTrash, \n    faPaperPlane,\n    faHeart, \n    faImage,faUserPlus\n} from '@fortawesome/free-solid-svg-icons';\nimport { faTwitter} from '@fortawesome/free-brands-svg-icons';\nimport {faGrinHearts, faComment } from '@fortawesome/free-regular-svg-icons';\n\nconst API_URL = 'https://project3-44gu.onrender.com/';\n\nconst MainPage = ({ user = {}, onLogout, setUser, onUsernameClick }) => { \n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newComment, setNewComment] = useState('');\n  const [editingComment, setEditingComment] = useState({id: null, text: ''});\n  const [suggestedPosts, setSuggestedPosts] = useState([]);\n  const [text, setText] = useState('');\n  const [image, setImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [loadingPost, setLoadingPost] = useState(false);\n  const [followedUsers, setFollowedUsers] = useState(new Set());\n \n\n  useEffect(() => {\n    fetchPosts();\n  }, [user?._id]); \n\n\n  // fetch all post for the main page:\n\n  const fetchPosts = async () => {\n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/all`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch posts');\n      }\n\n      const allPosts = await response.json();\n\n      if (user?._id){ // we want to check if the user is logged in, if it is, then filter posts that are join the following list id\n        const filterPosts = allPosts.filter(post=>{\n            return post.user._id ===user._id || user.following.includes(post.user._id); //include either self or following's post\n        });\n        setPosts(filterPosts);\n\n        const suggestedPosts = allPosts.filter(post =>\n            post.user._id !== user._id && !user.following.includes(post.user._id)\n        );\n        setSuggestedPosts(suggestedPosts);\n      }else{\n        setPosts(allPosts);\n      }\n      \n    } catch (error) {\n      setError('Failed to load posts. Please try again later.');\n      console.error('Error fetching posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n// helper function to parse the timestamp in mongodb to new date format\n  const formatDate = (createAt) => {\n    if (!createAt) return '';\n    return new Date(createAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // handle function for like or unlike the post function\n\n  const handleLikeUnlike = async(postId) =>{\n    if (!user?._id){\n        setError(\"Please log in to like or unlike the post\"); //can only like or unlike the post when the user is logged in\n        return;\n    }\n\n    try{\n      console.log('Current JWT cookie:', document.cookie); // adding for debugging\n\n\n        const response = await fetch(`${API_URL}api/v1/posts/like/${postId}`,{\n            method: 'PUT',\n            headers: {\n                 'Content-Type': 'application/json'\n            },\n            credentials: 'include'\n        });\n\n        console.log('Response status:', response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.log('Error response:', errorText);\n            throw new Error(`Failed to like/unlike post: ${errorText}`);\n        }\n\n        if (!response.ok) throw new Error('Failed to like/unlike post');\n        const updatedLikes = await response.json();\n\n        setPosts(posts.map(post =>{\n            if (post._id==postId){\n                return {...post, likes: updatedLikes.likes};\n            }\n            return post;\n        }));\n\n        \n    }catch(error){\n        console.error('Error liking/unliking post:', error);\n        setError('Failed to like/unlike post');\n    }\n  };\n\n  // to edit the comment \n\n  const handleCommentChange = (postId, value) => {\n    setNewComment(prev => ({\n      ...prev,\n      [postId]: value\n    }));\n  };\n\n  const handleComment = async (postId) => {\n    if (!user?._id) {\n      setError('Please log in to comment');\n      return;\n    }\n    const commentText = newComment[postId];\n    if (!commentText.trim()) {\n        setError('Comment cannot be empty');\n        return;\n      }\n      try{\n        const response = await fetch(`${API_URL}api/v1/posts/comment/${postId}`, {\n            method: 'PATCH',\n            headers:{\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include',\n            body: JSON.stringify({ text: commentText })\n        });\n        if (!response.ok) throw new Error('Failed to add comment');\n\n        setNewComment(prev => ({\n            ...prev,\n            [postId]: ''\n          }));\n      fetchPosts();\n      }catch(error){\n        console.error('Error adding comment:', error);\n        setError('Failed to add comment');\n      }\n  }\n// to like or unlike the post\n  const isLikedByUser = (post) => {\n    return post.likes.includes(user?._id);\n  };\n\n  const handleEditComment = async (postId, commentId) =>{\n    if (!editingComment.text.trim()) {\n        setError('Comment cannot be empty');\n        return;\n    }\n\n    try{\n        const response = await fetch(`${API_URL}api/v1/posts/comment/${postId}`,{\n            method: 'PATCH',\n            headers:{\n                'Content-Type': 'application/json'  \n            },\n            credentials :'include',\n            body: JSON.stringify({ text: editingComment.text })\n        });\n        if (!response.ok) throw new Error('Failed to edit comment');\n\n    setEditingComment({ id: null, text: '' });\n    fetchPosts();\n    }catch (error) {\n        console.error('Error editing comment:', error);\n        setError('Failed to edit comment');\n      }\n  }\n// add follow/unfollow \nconst handleFollow = async (userId) => {\n  if (!user?._id) {\n    setError('Please log in to follow users');\n    return;\n  }\n\n  try {\n    const response = await fetch(`${API_URL}api/v1/users/follow/${userId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    });\n\n    if (!response.ok) throw new Error('Failed to follow user');\n    \n    // Update the followedUsers set\n    setFollowedUsers(prev => {\n      const newSet = new Set(prev);\n      if (prev.has(userId)) {\n        newSet.delete(userId);\n      } else {\n        newSet.add(userId);\n      }\n      return newSet;\n    });\n\n    // Refresh posts to update feed\n    fetchPosts();\n  } catch (error) {\n    console.error('Error following user:', error);\n    setError('Failed to follow user');\n  }\n};\n\n  \n  // delete post handler\n\n  const handleDeletePost = async (postId) => {\n    if (!window.confirm('Are you sure you want to delete this post?')) {\n      return;\n    }\n  \n    try {\n      const response = await fetch(`${API_URL}api/v1/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n  \n      if (!response.ok) throw new Error('Failed to delete post');\n      setPosts(posts.filter(post => post._id !== postId));\n    } catch (error) {\n      console.error('Error deleting post:', error);\n      setError('Failed to delete post');\n    }\n  };\n  //-------------create post-------------------------------\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    const MAX_FILE_SIZE = 100 * 1024 ; //100kb\n    if (file) {\n      if (file.size > MAX_FILE_SIZE) {\n        setError('Image size must be less than 100kb');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageStr = reader.result.split(',')[1];\n        setImagePreview(reader.result);\n        setImage(imageStr);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (!text) {\n      setError('Please add some text');\n      return;\n    }\n\n    setLoadingPost(true);\n    try {\n      const postData = {\n        text: text\n      };\n      \n      // Only add img if it exists\n      if (image) {\n        postData.img = image;\n      }\n\n      console.log('Sending request with:', postData);\n\n      const response = await fetch(`${API_URL}api/v1/posts/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(postData)\n      });\n\n      if (!response.ok) throw new Error(\"Failed to create post\");\n      const newPost = await response.json();\n      setText('');\n      setImage(null);\n      setImagePreview(null);\n      fetchPosts();\n    } catch (error) {\n      setError('Failed to create post');\n      console.error('Error creating post:', error);\n    } finally {\n      setLoadingPost(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n   \n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-800\">\n              <FontAwesomeIcon icon={faTwitter} color =\"#0ea5e9\"/> <> </>\n                {user?._id ? 'Your Feed' : 'Recent Posts From All Users'}\n              </h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              {user?._id ? (\n                <><div><img src={user.profileImg || \"https://picsum.photos/seed/picsum/50/50\"}  className=\"w-8 h-8 rounded-full mr-2\"/>\n                  <button \n                    onClick={() => onUsernameClick(user.username)}\n                    className=\"text-xl font-bold text-gray-700 hover:text-blue-500\"\n                  >\n                    Welcome, {user.username}!\n                  </button></div>\n            \n                </>\n              ) : (\n                \n                <div className=\"text-gray-600\"><> </>\n                      Please log in to like or comment </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n   \n      <div className=\"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n      \n        {/* Add Create Post Button here, only shown when user is logged in */}\n        {user?._id && (\n        //   <div className=\"mb-6\">\n        //     <button\n        //       onClick={() => window.location.href = '/create-post'}  \n        //       className=\"w-full bg-white shadow rounded-lg p-4 text-left hover:shadow-md transition-shadow flex items-center space-x-3\"\n        //     >\n        //       <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center\">\n        //         <FontAwesomeIcon icon={faEnvelope} color=\"#0ea5e9\"/>\n        //       </div>\n        //       <span className=\"text-gray-500\">Share your thoughts or updates</span>\n        //     </button>\n        //   </div>\n        <div className=\"mb-6\">\n    <div className=\"w-full max-w-3xl mx-auto py-8 \">\n        <div className=\"bg-white shadow mb-6\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex justify-between h-16\">\n              <div className=\"flex items-center\">\n                <h1 className=\"text-2xl font-bold text-gray-800\">\n                  <FontAwesomeIcon icon={faEnvelope} color=\"#0ea5e9\" /> <> </>\n                  Create Your Post!\n                </h1>\n              </div>\n            </div>\n          </div>\n        </div>\n      <div className=\"w-full max-w-2xl bg-white rounded-lg shadow p-6 justify-between\">\n        <form onSubmit={handleSubmit}>\n          <textarea\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            placeholder=\"Feel free to share your thoughts here!\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            rows=\"3\"\n          />\n\n          {imagePreview && (\n            <div className=\"relative mt-2\">\n              <img\n                src={imagePreview}\n                alt=\"Preview\"\n                className=\"max-h-48 rounded-lg\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setImage(null);\n                  setImagePreview(null);\n                }}\n                className=\"absolute top-2 right-2 p-1 bg-gray-800 rounded-full text-white\"\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            </div>\n          )}\n\n          {error && (\n            <p className=\"text-red-500 text-sm mt-2\">{error}</p>\n          )}\n\n          <div className=\"flex justify-between items-center mt-3\">\n            <label className=\"cursor-pointer text-gray-600 hover:text-gray-800\">\n              <FontAwesomeIcon icon={faImage} className=\"mr-2\" />\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleImageChange}\n                className=\"hidden\"\n              />\n              Add Image\n            </label>\n\n            <button\n              type=\"submit\"\n              disabled={loading || (!text && !image)}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 disabled:opacity-50\"\n            >\n              {loading ? 'Posting...' : <><FontAwesomeIcon icon={faPaperPlane} className=\"mr-2\" />Post</>}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n        )}\n\n        {loading ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-600\">Loading posts...</div>\n          </div>\n        ) : error ? (\n          <div className=\"bg-red-50 border border-red-200 rounded-md p-4 text-red-700\">\n            {error}\n          </div>\n        ) : posts.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-600\">\n              {user?._id ? \"No posts from people you follow yet\" : \"No posts available\"}\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {posts.map((post) => (\n              <div key={post._id} className=\"bg-white rounded-lg shadow overflow-hidden\">\n                {/* Post Header */}\n                <div className=\"p-4 border-b\">\n                  <div className=\"flex items-center\">\n                    <img\n                      src={post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\"}\n                      alt={post.user.username}\n                      className=\"h-10 w-10 rounded-full\"\n                    />\n                    <div className=\"ml-3\">\n                      <p className=\"text-sm font-medium text-gray-900\"><FontAwesomeIcon icon={faUser}/> <></>\n                      <button \n                    onClick={() => onUsernameClick(post.user.username)}\n                    className=\"hover:text-blue-500\"\n                  >\n                    {post.user.fullName}\n                  </button>\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                      <button \n                    onClick={() => onUsernameClick(post.user.username)}\n                    className=\"hover:text-blue-500\"\n                  >\n                    @{post.user.username}\n                  </button>\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        {formatDate(post.createdAt)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n         \n\n\n                {/* Post Content */}\n                <div className=\"p-4\">\n                  <p className=\"text-gray-800 whitespace-pre-wrap\">{post.text}</p>\n                  {post.img && (\n                    <img\n                      src={post.img}\n                      alt=\"Post attachment\"\n                      className=\"mt-3 rounded-lg max-h-96 w-full object-cover\"\n                    />\n                  )}\n                </div>\n\n                {/* Post Actions */}\n                <div className=\"px-4 py-3 border-t bg-gray-50\">\n                  <div className=\"flex items-center justify-center space-x-10\">\n                    <button \n                      onClick={() => handleLikeUnlike(post._id)}\n                      disabled={!user?._id}\n                      className={`flex items-center space-x-2 ${\n                        isLikedByUser(post) \n                          ? 'text-blue-500' \n                          : 'text-gray-500 hover:text-blue-500'\n                      } ${!user?._id && 'cursor-not-allowed opacity-50'}`}\n                    >\n                      <FontAwesomeIcon icon={faHeart}  color ='darkred' />\n                      <span color =\"#0ea5e9\">{post.likes.length}</span>\n                    </button>\n\n\n                    {user?._id && (\n                      <div className=\"flex-1 mx-4\">\n                        <input\n                          type=\"text\"\n                          value={newComment[post._id] || ''}\n                          onChange={(e) => handleCommentChange(post._id, e.target.value)}\n                          placeholder=\"Add a comment...\"\n                          className=\"w-full px-3 py-1 text-sm border rounded-full focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          onKeyDown={(e) => {\n                            if (e.key === 'Enter') {\n                              handleComment(post._id);\n                            }\n                          }}\n                        />\n                      </div>\n                    )}\n                \n\n                    <div className=\"flex items-center space-x-2 text-gray-500\">\n                      <FontAwesomeIcon icon={faComment} />\n                      <span>{post.comments.length}</span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2 text-gray-500\">\n                {user?._id === post.user._id && (\n      <button\n        onClick={() => handleDeletePost(post._id)}\n        className=\"text-darkred-500 hover:text-red-600 justify-items-end\"\n      > \n        <FontAwesomeIcon icon={faTrash} /> Delete the Post\n      </button>\n    )}</div>\n\n        {post.comments && post.comments.length > 0 && (\n                  <div className=\"px-4 pt-2 pb-4 bg-gray-50\">\n                    {post.comments.map((comment) => (\n                      <div key={comment._id} className=\"mt-2 p-2 bg-white rounded-lg\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center\">\n                            <FontAwesomeIcon icon={faUser} className=\"text-gray-400 mr-2\" />\n                            <span className=\"font-medium text-sm\">{comment.user.username}: </span>\n                            {editingComment.id === comment._id ? (\n                                <div className=\"flex items-center space-x-2\">\n                              <input\n                                type=\"text\"\n                                value={editingComment.text}\n                                onChange={(e) => setEditingComment({ ...editingComment, text: e.target.value })}\n                                className=\"ml-2 border rounded px-2 py-1 text-sm\"\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter') {\n                                    handleEditComment(post._id, comment._id);\n                                  }\n                                }}\n                              />\n                               <button\n                  onClick={() => handleEditComment(post._id, comment._id)}\n                  className=\"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600\"\n                >\n                  Save\n                </button>\n              </div>\n                            ) : (\n                              <span className=\"ml-2 text-sm\">{comment.text}</span>\n                            )}\n                          </div>\n                          {user?._id === comment.user._id && (\n                            <div>\n                              {editingComment.id === comment._id ? (\n                                <button\n                                  onClick={() => handleEditComment(post._id, comment._id)}\n                                  className=\"text-xs text-blue-500 hover:text-blue-600\"\n                                >\n                                  Save\n                                </button>\n                              ) : (\n                                <button\n                                  onClick={() => setEditingComment({ id: comment._id, text: comment.text })}\n                                  className=\"text-xs text-gray-500 hover:text-gray-600\"\n                                >\n                                  Edit\n                                </button>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n    \n\n              </div>\n            ))}\n            \n          </div>\n        )}\n   \n      </div>\n      {/* Suggested Posts Section */}\n\n\n  {/* {user?._id && suggestedPosts.length > 0 && (\n    <div className=\"max-w-3xl mx-auto mt-8\">\n    <div className=\"bg-white rounded-lg shadow-md p-4\">\n      <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\n        <FontAwesomeIcon icon={faUser} className=\"mr-2\" color=\"#0ea5e9\"/>\n        Posts You Might Like\n      </h2>\n      <div className=\"space-y-4\">\n        {suggestedPosts.slice(0, 10).map((post) => (\n          <div key={post._id} className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center\">\n                <img\n                  src={post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\"}\n                  alt={post.user.username}\n                  className=\"h-8 w-8 rounded-full\"\n                />\n                <div className=\"ml-2\">\n                  <p className=\"text-sm font-medium text-gray-900\">{post.user.fullName}</p>\n                  <p className=\"text-xs text-gray-500\">@{post.user.username}</p>\n                </div>\n              </div>\n              <button\n        onClick={() => handleFollow(post.user._id)}\n          className={`px-4 py-1 text-sm rounded-full ${\n                      followedUsers.has(post.user._id)\n      ? 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n      : 'bg-blue-500 text-white hover:bg-blue-600'\n  }`}\n>\n  {followedUsers.has(post.user._id) ? 'Unfollow' : 'Follow'}\n              </button>\n            </div>\n            <p className=\"text-sm text-gray-800 line-clamp-2\">{post.text}</p>\n            {post.img && (\n              <img\n                src={post.img}\n                alt=\"Post attachment\"\n                className=\"mt-2 rounded-lg max-h-48 w-full object-cover\"\n              />\n            )}\n\n            \n            <div className=\"mt-2 flex items-center space-x-4 text-sm text-gray-500\">\n              <span className=\"flex items-center\">\n                <FontAwesomeIcon icon={faHeart} className=\"mr-1\" />\n                {post.likes.length}\n              </span>\n              <span className=\"flex items-center\">\n                <FontAwesomeIcon icon={faComment} className=\"mr-1\" />\n                {post.comments.length}\n              </span>\n            </div>\n          </div>\n        ))} \n      </div>\n    </div>\n  </div>\n)}*/}\n\n{user?._id && suggestedPosts.length > 0 && (\n  <div className=\"max-w-3xl mx-auto mt-8\">\n    <div className=\"bg-white rounded-lg shadow-md p-4\">\n      <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\n        <FontAwesomeIcon icon={faUserPlus} className=\"mr-2\" color=\"#0ea5e9\"/>\n        Posts You Might Like\n      </h2>\n      <div className=\"space-y-4\">\n        {suggestedPosts.slice(0, 10).map((post) => (\n          <div key={post._id} className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center\">\n                <img\n                  src={post.user.profileImg || \"https://picsum.photos/seed/picsum/50/50\"}\n                  alt={post.user.username}\n                  className=\"h-8 w-8 rounded-full\"\n                />\n                <div className=\"ml-2\">\n                  <p className=\"text-sm font-medium text-gray-900\"> <button \n        onClick={() => onUsernameClick(post.user.username)}\n        className=\"hover:text-blue-500\"\n      >\n        {post.user.fullName}\n      </button></p>\n                  <p className=\"text-xs text-gray-500\">  <button \n        onClick={() => onUsernameClick(post.user.username)}\n        className=\"hover:text-blue-500\"\n      >\n        @{post.user.username}\n      </button></p>\n                </div>\n              </div>\n              <button\n                onClick={() => handleFollow(post.user._id)}\n                className={`px-4 py-1 text-sm rounded-full ${\n                  followedUsers.has(post.user._id)\n                    ? 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                    : 'bg-blue-500 text-white hover:bg-blue-600'\n                }`}\n              >\n                {followedUsers.has(post.user._id) ? 'Unfollow' : 'Follow'}\n              </button>\n            </div>\n            <p className=\"text-sm text-gray-800 line-clamp-2\">{post.text}</p>\n            {post.img && (\n              <img\n                src={post.img}\n                alt=\"Post attachment\"\n                className=\"mt-2 rounded-lg max-h-48 w-full object-cover\"\n              />\n            )}\n            <div className=\"mt-2 flex items-center space-x-4 text-sm text-gray-500\">\n              <span className=\"flex items-center\">\n                <FontAwesomeIcon icon={faHeart} className=\"mr-1\" />\n                {post.likes.length}\n              </span>\n              <span className=\"flex items-center\">\n                <FontAwesomeIcon icon={faComment} className=\"mr-1\" />\n                {post.comments.length}\n              </span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n)}\n    </div>\n    \n  );\n};\n\nexport default MainPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}